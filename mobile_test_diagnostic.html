<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë³„ë¼ì±„íŒ… ëª¨ë°”ì¼ ì§„ë‹¨ ë„êµ¬</title>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    .diagnostic-box {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h2 {
      color: #667eea;
      margin-top: 0;
    }
    .test-button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin: 10px 5px;
    }
    .result {
      background: #f9fafb;
      border-left: 4px solid #667eea;
      padding: 12px;
      margin: 10px 0;
      font-family: monospace;
      font-size: 14px;
      white-space: pre-wrap;
    }
    .success { border-left-color: #10b981; }
    .error { border-left-color: #ef4444; }
    .warning { border-left-color: #f59e0b; }
  </style>
</head>
<body>
  <h1>â­ ë³„ë¼ì±„íŒ… ëª¨ë°”ì¼ ì§„ë‹¨ ë„êµ¬</h1>
  
  <div class="diagnostic-box">
    <h2>1. í™˜ê²½ ì •ë³´</h2>
    <div id="env-info"></div>
  </div>
  
  <div class="diagnostic-box">
    <h2>2. ë¹ ë¥¸ í…ŒìŠ¤íŠ¸</h2>
    <button class="test-button" onclick="openTestSite()">ğŸŒ í…ŒìŠ¤íŠ¸ ì‚¬ì´íŠ¸ ì—´ê¸°</button>
    <button class="test-button" onclick="copyDiagnosticScript()">ğŸ“‹ ì§„ë‹¨ ìŠ¤í¬ë¦½íŠ¸ ë³µì‚¬</button>
  </div>
  
  <div class="diagnostic-box">
    <h2>3. ì§„ë‹¨ ìŠ¤í¬ë¦½íŠ¸ (ì‚¬ì´íŠ¸ì—ì„œ ì‹¤í–‰)</h2>
    <p>ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë³µì‚¬í•˜ì—¬ ì‹¤ì œ ì±„íŒ… í˜ì´ì§€ì˜ ì½˜ì†”ì—ì„œ ì‹¤í–‰í•˜ì„¸ìš”:</p>
    <div class="result">
<textarea id="diagnostic-script" readonly style="width: 100%; height: 300px; font-family: monospace; font-size: 12px;">
// ë³„ë¼ì±„íŒ… ëª¨ë°”ì¼ ì§„ë‹¨ ìŠ¤í¬ë¦½íŠ¸
console.log("ğŸ” === ë³„ë¼ì±„íŒ… ëª¨ë°”ì¼ ì§„ë‹¨ ì‹œì‘ ===");

// 1. í™˜ê²½ ì •ë³´
console.log("\nğŸ“± 1. í™˜ê²½ ì •ë³´:");
console.log("User Agent:", navigator.userAgent);
console.log("í™”ë©´ í¬ê¸°:", window.innerWidth + "x" + window.innerHeight);
console.log("Device Pixel Ratio:", window.devicePixelRatio);
console.log("Touch ì§€ì›:", 'ontouchstart' in window);

// 2. í•„ìˆ˜ ìš”ì†Œ í™•ì¸
console.log("\nğŸ” 2. í•„ìˆ˜ ìš”ì†Œ í™•ì¸:");
const messageInput = document.getElementById("message-input");
const sendButton = document.getElementById("send-button");
const emojiButton = document.getElementById("emoji-button");
const messagesContainer = document.getElementById("messages");

console.log("message-input:", messageInput ? "âœ… ì¡´ì¬" : "âŒ ì—†ìŒ");
console.log("send-button:", sendButton ? "âœ… ì¡´ì¬" : "âŒ ì—†ìŒ");
console.log("emoji-button:", emojiButton ? "âœ… ì¡´ì¬" : "âŒ ì—†ìŒ");
console.log("messages:", messagesContainer ? "âœ… ì¡´ì¬" : "âŒ ì—†ìŒ");

// 3. ì „ì†¡ ë²„íŠ¼ ìŠ¤íƒ€ì¼ í™•ì¸
if (sendButton) {
  console.log("\nğŸ¨ 3. ì „ì†¡ ë²„íŠ¼ ìŠ¤íƒ€ì¼:");
  const styles = window.getComputedStyle(sendButton);
  console.log("display:", styles.display);
  console.log("visibility:", styles.visibility);
  console.log("opacity:", styles.opacity);
  console.log("width:", styles.width);
  console.log("height:", styles.height);
  console.log("position:", styles.position);
  console.log("z-index:", styles.zIndex);
  console.log("background:", styles.background);
  console.log("pointer-events:", styles.pointerEvents);
  
  // ë²„íŠ¼ ìœ„ì¹˜
  const rect = sendButton.getBoundingClientRect();
  console.log("\nğŸ“ ë²„íŠ¼ ìœ„ì¹˜:");
  console.log("top:", rect.top);
  console.log("left:", rect.left);
  console.log("right:", rect.right);
  console.log("bottom:", rect.bottom);
  console.log("í™”ë©´ ë‚´ ìœ„ì¹˜:", rect.top >= 0 && rect.bottom <= window.innerHeight ? "âœ… í™”ë©´ ì•ˆ" : "âš ï¸ í™”ë©´ ë°–");
}

// 4. ì…ë ¥ ì»¨í…Œì´ë„ˆ í™•ì¸
const inputContainer = document.querySelector(".message-input-container");
if (inputContainer) {
  console.log("\nğŸ“¦ 4. ì…ë ¥ ì»¨í…Œì´ë„ˆ:");
  const styles = window.getComputedStyle(inputContainer);
  console.log("position:", styles.position);
  console.log("bottom:", styles.bottom);
  console.log("z-index:", styles.zIndex);
  console.log("width:", styles.width);
}

// 5. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ í™•ì¸
console.log("\nğŸ‘† 5. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ í…ŒìŠ¤íŠ¸:");
if (sendButton) {
  console.log("ì „ì†¡ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì½˜ì†”ì— ë©”ì‹œì§€ê°€ ë‚˜íƒ€ë‚˜ì•¼ í•©ë‹ˆë‹¤.");
  console.log("ì˜ˆìƒ ë©”ì‹œì§€: 'ğŸ‘† í„°ì¹˜ ì „ì†¡' ë˜ëŠ” 'ğŸ–±ï¸ í´ë¦­ ì „ì†¡'");
}

// 6. CSS ë¯¸ë””ì–´ ì¿¼ë¦¬ í™•ì¸
console.log("\nğŸ“± 6. ë¯¸ë””ì–´ ì¿¼ë¦¬:");
const isMobile = window.matchMedia("(max-width: 768px)").matches;
console.log("ëª¨ë°”ì¼ ëª¨ë“œ:", isMobile ? "âœ… í™œì„±í™”" : "âŒ ë¹„í™œì„±í™”");

// 7. í„°ì¹˜ ì´ë²¤íŠ¸ í…ŒìŠ¤íŠ¸
if (sendButton) {
  console.log("\nğŸ§ª 7. í„°ì¹˜ ì´ë²¤íŠ¸ í…ŒìŠ¤íŠ¸ ì„¤ì •:");
  let testTouchHandled = false;
  
  sendButton.addEventListener("touchstart", function(e) {
    console.log("âœ… touchstart ì´ë²¤íŠ¸ ë°œìƒ");
  }, { passive: true });
  
  sendButton.addEventListener("touchend", function(e) {
    console.log("âœ… touchend ì´ë²¤íŠ¸ ë°œìƒ");
  }, { passive: true });
  
  sendButton.addEventListener("click", function(e) {
    console.log("âœ… click ì´ë²¤íŠ¸ ë°œìƒ");
  }, { passive: true });
  
  console.log("ì´ì œ ì „ì†¡ ë²„íŠ¼ì„ íƒ­/í´ë¦­í•´ë³´ì„¸ìš”!");
}

console.log("\nâœ… === ì§„ë‹¨ ì™„ë£Œ ===");
console.log("ìœ„ ì •ë³´ë¥¼ ê°œë°œìì—ê²Œ ì „ë‹¬í•´ì£¼ì„¸ìš”.");
</textarea>
    </div>
    <button class="test-button" onclick="copyDiagnosticScript()">ğŸ“‹ ìŠ¤í¬ë¦½íŠ¸ ë³µì‚¬</button>
  </div>
  
  <div class="diagnostic-box">
    <h2>4. í…ŒìŠ¤íŠ¸ ì ˆì°¨</h2>
    <ol style="line-height: 2;">
      <li><strong>Chrome ê°œë°œì ë„êµ¬ ì—´ê¸°</strong>: F12 ë˜ëŠ” Ctrl+Shift+I</li>
      <li><strong>ëª¨ë°”ì¼ ëª¨ë“œ í™œì„±í™”</strong>: Ctrl+Shift+M ë˜ëŠ” Device Toolbar ì•„ì´ì½˜ í´ë¦­</li>
      <li><strong>iPhone ì„ íƒ</strong>: ìƒë‹¨ ë“œë¡­ë‹¤ìš´ì—ì„œ "iPhone 12 Pro" ë˜ëŠ” "iPhone SE" ì„ íƒ</li>
      <li><strong>ì‚¬ì´íŠ¸ ì ‘ì†</strong>: <code>https://lynn-overpowering-yulanda.ngrok-free.dev</code></li>
      <li><strong>ngrok í™”ë©´</strong>: "Visit Site" ë²„íŠ¼ í´ë¦­</li>
      <li><strong>ë¡œê·¸ì¸</strong>: ì•„ì´ë”” "ê´€ë¦¬ì", ë¹„ë°€ë²ˆí˜¸ "7359"</li>
      <li><strong>ì½˜ì†” íƒ­ ì—´ê¸°</strong>: Console íƒ­ìœ¼ë¡œ ì´ë™</li>
      <li><strong>ì§„ë‹¨ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰</strong>: ìœ„ì˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë³µì‚¬í•˜ì—¬ ì½˜ì†”ì— ë¶™ì—¬ë„£ê³  Enter</li>
      <li><strong>ê²°ê³¼ í™•ì¸</strong>: ì½˜ì†”ì— ì¶œë ¥ëœ ì •ë³´ í™•ì¸</li>
      <li><strong>ì „ì†¡ ë²„íŠ¼ í…ŒìŠ¤íŠ¸</strong>: ì…ë ¥ì°½ì— "ëª¨ë°”ì¼í…ŒìŠ¤íŠ¸123" ì…ë ¥ í›„ ì „ì†¡ ë²„íŠ¼ í´ë¦­</li>
    </ol>
  </div>
  
  <div class="diagnostic-box">
    <h2>5. ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
    <div class="result">
â–¡ ì „ì†¡ ë²„íŠ¼ì´ í™”ë©´ì— ë³´ì´ëŠ”ê°€?
â–¡ ì „ì†¡ ë²„íŠ¼ì´ íŒŒë€ìƒ‰/ë³´ë¼ìƒ‰ ê·¸ë¼ë°ì´ì…˜ì¸ê°€?
â–¡ ì „ì†¡ ë²„íŠ¼ì´ ë™ê·¸ë€ ëª¨ì–‘ì¸ê°€?
â–¡ ì „ì†¡ ë²„íŠ¼ì´ í™”ë©´ ìš°ì¸¡ í•˜ë‹¨ì— ìˆëŠ”ê°€?
â–¡ ì „ì†¡ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë°˜ì‘ì´ ìˆëŠ”ê°€?
â–¡ ì½˜ì†”ì— "ì±„íŒ… ì´ˆê¸°í™” ì™„ë£Œ" ë©”ì‹œì§€ê°€ ìˆëŠ”ê°€?
â–¡ ì „ì†¡ ë²„íŠ¼ í´ë¦­ ì‹œ "í„°ì¹˜ ì „ì†¡" ë˜ëŠ” "í´ë¦­ ì „ì†¡" ë©”ì‹œì§€ê°€ ë‚˜ì˜¤ëŠ”ê°€?
â–¡ ë©”ì‹œì§€ê°€ ì‹¤ì œë¡œ ì „ì†¡ë˜ëŠ”ê°€?
â–¡ ì½˜ì†”ì— ì—ëŸ¬ê°€ ìˆëŠ”ê°€?
    </div>
  </div>

  <script>
    // í™˜ê²½ ì •ë³´ í‘œì‹œ
    window.onload = function() {
      const envInfo = document.getElementById('env-info');
      envInfo.innerHTML = `
        <div class="result">
User Agent: ${navigator.userAgent}
í™”ë©´ í¬ê¸°: ${window.innerWidth} x ${window.innerHeight}
Device Pixel Ratio: ${window.devicePixelRatio}
Touch ì§€ì›: ${'ontouchstart' in window ? 'âœ… ì§€ì›' : 'âŒ ë¯¸ì§€ì›'}
Platform: ${navigator.platform}
        </div>
      `;
    };
    
    function openTestSite() {
      window.open('https://lynn-overpowering-yulanda.ngrok-free.dev', '_blank');
    }
    
    function copyDiagnosticScript() {
      const script = document.getElementById('diagnostic-script');
      script.select();
      document.execCommand('copy');
      alert('âœ… ì§„ë‹¨ ìŠ¤í¬ë¦½íŠ¸ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nì±„íŒ… í˜ì´ì§€ì˜ ì½˜ì†”(F12)ì— ë¶™ì—¬ë„£ê³  ì‹¤í–‰í•˜ì„¸ìš”.');
    }
  </script>
</body>
</html>
